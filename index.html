<!DOCTYPE html>
<html style="height:100%;margin:0;padding:0;">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>토지정보 조회 시스템 beta ver.0.1</title>

<!-- 광고 설정 (보안: client id 직접 노출 불가피 - 도메인 제한 권장) -->
<meta name="google-adsense-account" content="ca-pub-4187457564577316">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4187457564577316" crossorigin="anonymous"></script>

<!-- 외부 라이브러리 -->
<script src="https://map.vworld.kr/js/vworldMapInit.js.do?version=2.0&apiKey=A12CEDAE-86F1-3453-BC92-3FD98BE14103"></script>
<script src="https://map.vworld.kr/js/webglMapInit.js.do?version=3.0&apiKey=A12CEDAE-86F1-3453-BC92-3FD98BE14103"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"/>
<script src="https://ecvam.neins.go.kr/apiConfirm.do?APIKEY=MUTW-PGHX-76CT-ENMD"></script>

<!-- 애플리케이션 리소스 -->
<link rel="stylesheet" href="style.css"/>
</head>
<body>
<div class="wrap">
  <!-- 지도 영역 -->
  <div class="map-area">
    <div id="vmap" style="display:none;"></div>
    <div id="ol3map"></div>
    <div class="map-ctrl">
      <select id="mapTypeSel" onchange="changeMapType()">
        <option value="2d" selected>🗺 2D 일반지도</option>
        <option value="3d">🌐 3D 지도</option>
      </select>
    </div>
  </div>

  <!-- 사이드 패널 -->
  <div class="side" id="sidePanel">
    <!-- 모바일 bottom sheet 핸들 -->
    <div class="sheet-pull" id="sheetPull" onclick="toggleMobileSheet()">
      <div class="sheet-pull-bar"></div>
      <span class="sheet-pull-label" id="sheetPullLabel">토지정보를 클릭하여 조회하세요</span>
      <span class="sheet-pull-toggle" id="sheetPullToggle">▼</span>
    </div>

    <!-- 헤더 -->
    <div class="hd">
      <h1>🏛 토지정보 조회 시스템 <span style="font-size:10px; font-weight:normal; opacity:0.7; vertical-align:middle; margin-left:4px;">beta ver.0.1</span></h1>
      <p>VWorld API 기반 지적정보 · 용도지역 · 지구단위 조회</p>
    </div>

    <!-- 주소 검색 -->
    <div class="search-row">
      <input id="addrInput" type="text" placeholder="주소 입력 (예: 판교로 242)"/>
      <button onclick="searchAddress()">🔍 검색</button>
    </div>

    <!-- [광고 영역 A] 사이드바 상단 광고 슬롯 -->
    <div class="ad-container sidebar-top-ad">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-4187457564577316"
           data-ad-slot="YOUR_AD_SLOT_ID"
           data-ad-format="horizontal"
           data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <!-- 내보내기/지우기 -->
    <div class="btn-row">
      <button class="btn-export" onclick="exportToCSV()">💾 토지조서 내보내기</button>
      <button class="btn-clear" onclick="clearLandInfo()">🗑 전체 삭제</button>
    </div>

    <!-- 옵션/주제도 (생략 가능 영역) -->
    <div class="opt-table">
      <table>
        <tr>
          <th>지도 타입</th>
          <td><span id="currentMapType">2D 일반지도</span></td>
        </tr>
        <tr>
          <th>토지정보 조회</th>
          <td><input id="landChk" type="checkbox" onchange="toggleLandParcel(this.checked)"> 활성화</td>
        </tr>
      </table>
    </div>

    <!-- 상태 메시지/카운트 -->
    <div class="status-bar" id="statusBar"></div>
    <div class="cnt-bar">
      <span class="ttl">📂 수집된 토지 정보</span>
      <span class="cnt-badge" id="landCnt">총 0건</span>
    </div>
    <div class="area-sum-bar" id="areaSumBar" style="display:none;">
      <span class="area-sum-label">📐 <span id="areaCnt">0</span>필지 합계</span>
      <span class="area-sum-val" id="areaSumVal">0 ㎡</span>
    </div>

    <!-- 토지 목록 -->
    <div class="land-list" id="landList">
      <div id="mobLandTableWrap" class="mob-land-tbl-wrap">
        <table class="mob-land-tbl">
          <thead>
            <tr><th>순번</th><th>행정동/지번</th><th>지목</th><th>면적(㎡)</th><th>용도지역</th><th></th></tr>
          </thead>
          <tbody id="mobLandTbody"></tbody>
        </table>
      </div>
      <div class="empty-state">
        <div class="ico">📍</div>
        <p>지도에서 토지를 클릭하면<br>상세 정보가 표시됩니다</p>
      </div>
    </div>

    <!-- 국토계획 주제도 -->
    <div class="theme-panel">
      <div class="theme-hd">
        <span class="theme-hd-title">📋 국토계획 주제도</span>
        <button class="toggle-btn" onclick="toggleThemePanel()">펼치기</button>
      </div>
      <div id="themeList" style="display:none;"></div>
    </div>

    <!-- ECVAM 주제도 -->
    <div class="theme-panel" id="ecvamPanel">
      <div class="theme-hd">
        <span class="theme-hd-title">🌿 국토환경성평가 주제도</span>
        <button class="toggle-btn" id="ecvamToggleBtn" onclick="toggleEcvamPanel()">펼치기</button>
      </div>
      <div id="ecvamThemeList" style="display:none;">
        <div class="ecvam-legend">
          <span class="ecvam-badge ecvam-gr1">1등급</span>
          <span class="ecvam-badge ecvam-gr2">2등급</span>
          <span class="ecvam-badge ecvam-gr3">3등급</span>
          <span class="ecvam-badge ecvam-gr5">5등급</span>
        </div>
      </div>
    </div>

    <div class="footer">© 2026 UrbanCNS · Powered by VWorld API</div>
  </div>
</div>

<!-- 애플리케이션 로직 -->
<script type="module" src="main.js"></script>
</body>
</html>
