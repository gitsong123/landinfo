
# Blueprint: V-World 기반 토지 정보 조회 애플리케이션

## 1. 개요

본 프로젝트는 V-World API를 활용하여 사용자가 지도와 상호작용하며 특정 필지의 토지 정보를 조회, 관리하고, 그 결과를 CSV 파일로 내보낼 수 있는 웹 애플리케이션입니다. 모바일과 데스크톱 환경 모두에 최적화된 반응형 UI를 제공하며, 직관적인 시각화와 데이터 관리를 목표로 합니다.

## 2. 기존 기능 분석

- **지도 표시**: 2D/3D 지도 전환 기능
- **주소 검색**: 입력된 주소로 지도 이동
- **토지 정보 추가**: 지도 클릭 시 해당 위치의 기본 정보(지번 주소 등)를 목록에 추가
- **데이터 관리**: 추가된 토지 정보 목록을 전체 삭제하거나 CSV 파일로 내보내기
- **레이어 제어**: 건물 레이어 On/Off
- **반응형 UI**: 모바일 환경에서 하단 시트(Bottom Sheet)를 통해 정보 패널 표시

## 3. 기능 개선 계획 (WMS GetFeatureInfo 연동)

현재는 지도 클릭 시 위경도 좌표를 기반으로 지번 주소 등 제한된 정보만 가져오고 있습니다. V-World WMS의 **GetFeatureInfo** 기능을 활용하여, 사용자가 클릭한 지점의 상세한 토지 정보를 가져와 사용자에게 보여주는 기능을 구현합니다.

### 구현할 세부 기능

1.  **상세 정보 조회 활성화**:
    *   "토지정보 조회" 체크박스를 활성화하면 지도 클릭 시 GetFeatureInfo 요청을 보내도록 기존 로직을 수정합니다.

2.  **GetFeatureInfo 요청 구성**:
    *   사용자가 지도를 클릭하면 해당 지점의 화면 좌표(X, Y)와 현재 지도 범위(BBOX), 지도 크기(Width, Height)를 가져옵니다.
    *   V-World WMS 명세에 따라 아래 레이어들에 대한 정보 조회를 요청합니다.
        *   **연속지적도 (`lp_pa_cbnd_bubun`)**: 지번, 고유번호(pnu) 등 기본 정보
        *   **국토이용계획 (`lt_c_uq161`)**: 지역/지구/구역 지정 여부, 명칭 등
        *   **도시지역 (`lt_c_ud801`)**: 도시지역 해당 여부
        *   **생태자연도 (`bio_gr`)**: 생태자연도 등급
        *   **개별공시지가 (`lp_pa_pclnd_bubun`)**: 공시지가 정보

3.  **API 응답 처리 및 데이터 추출**:
    *   GetFeatureInfo의 응답은 GML(XML) 형식이므로, 이를 파싱하여 필요한 속성(attribute) 값을 추출합니다.
    *   예: `pnu`, `addr`, `land_purps_nm`, `cnflc_yn`, `jiga` 등의 값을 추출합니다.

4.  **조회 결과 표시**:
    *   추출된 상세 정보를 기존의 토지 정보 목록과 팝업창에 함께 표시하도록 UI를 업데이트합니다.
    *   정보가 없는 경우(예: 공시지가 정보 없음) "정보 없음" 또는 "해당 없음"으로 명확하게 표시합니다.
    *   팝업창(`printLandInfo` 함수)의 테이블에 아래 항목들을 추가합니다.
        *   **공시지가**
        *   **국토이용계획**
        *   **도시지역 여부**
        *   **생태자연도 등급**

5.  **CSV 내보내기 연동**:
    *   `exportToCSV` 함수를 수정하여 새로 추가된 상세 정보(공시지가, 이용계획 등)도 CSV 파일에 포함되도록 합니다.

---
